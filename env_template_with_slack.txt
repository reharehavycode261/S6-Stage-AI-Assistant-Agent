# ================================================================
# AI-AGENT v2.0 - CONFIGURATION AVEC SLACK
# Template de configuration avec notifications Slack activées
# ================================================================

# ===== API Keys - IA Providers =====
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
OPENAI_API_KEY=sk-your-openai-api-key-here  # Optionnel (fallback)

# ===== API Keys - Services =====
GITHUB_TOKEN=ghp_your_github_personal_access_token_here

# ===== Monday.com OAuth Configuration =====
MONDAY_CLIENT_ID=your-monday-client-id-here
MONDAY_CLIENT_KEY=your-monday-client-key-here
MONDAY_APP_ID=your-monday-app-id-here

# ===== Monday.com API Token (Global API Token) =====
MONDAY_API_TOKEN=your-monday-api-token-here

# ===== Webhook Configuration =====
WEBHOOK_SECRET=your-webhook-secret-key-here
ALLOWED_ORIGINS=*

# ===== Git Configuration =====
DEFAULT_BASE_BRANCH=main
GIT_USER_NAME=AI-Agent
GIT_USER_EMAIL=ai-agent@smartelia.com

# ===== Monday.com Configuration =====
MONDAY_BOARD_ID=5084415062
MONDAY_TASK_COLUMN_ID=name
MONDAY_STATUS_COLUMN_ID=status
MONDAY_REPOSITORY_URL_COLUMN_ID=text__1
MONDAY_SIGNING_SECRET=your-monday-signing-secret-here
MONDAY_API_URL=https://api.monday.com/v2

# ===== Feature Flags =====
VYDATA_REACTIVATION_V2=true

# ===== Database Configuration (Admin Backend) =====
DATABASE_URL=postgresql://admin:password@localhost:5432/ai_agent_admin
REDIS_URL=redis://localhost:6379/0

# ===== Security Configuration =====
SECRET_KEY=your-secret-key-for-jwt-signing-here
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ===== AI Engine Configuration =====
DEFAULT_AI_PROVIDER=anthropic
AI_MODEL_TEMPERATURE=0.1
AI_MAX_TOKENS=4000

# ===== Testing Configuration =====
ENABLE_SMOKE_TESTS=true
TEST_COVERAGE_THRESHOLD=80
MAX_TEST_RETRIES=3

# ===== RabbitMQ Configuration =====
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_VHOST=ai_agent
RABBITMQ_USER=ai_agent_user
RABBITMQ_PASSWORD=secure_password_123
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_ENABLE_MANAGEMENT=true

# ===== Application Configuration =====
DEBUG=false
LOG_LEVEL=INFO

# ===== Timeout Configuration =====
TASK_TIMEOUT=3600
TEST_TIMEOUT=600

# ===== Admin Frontend Configuration =====
ADMIN_FRONTEND_URL=http://localhost:3000

# ===== Monitoring Configuration =====
ENABLE_METRICS=true
METRICS_PORT=8080

# ================================================================
# ===== SLACK CONFIGURATION (NOUVEAU) =====
# ================================================================

# Activer les notifications Slack
SLACK_ENABLED=true

# Token du bot Slack (obtenu depuis https://api.slack.com/apps)
# Format: xoxb-1234567890123-1234567890123-abcdefghijklmnopqrstuvwx
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token-here

# ID du workspace Slack (optionnel, format: T0123456789)
# Utilisé pour des vérifications supplémentaires
SLACK_WORKSPACE_ID=T0123456789

# ================================================================
# Configuration des Timeouts de Validation Humaine
# ================================================================

# Timeout pour les QUESTIONS (pas de PR créée)
# Par défaut: 600 secondes (10 minutes)
VALIDATION_TIMEOUT_QUESTION=600

# Timeout pour les COMMANDES (avec PR et validation)
# Par défaut: 20 secondes (rappel Slack)
# Ce délai déclenche la notification de timeout Slack
VALIDATION_TIMEOUT_COMMAND=20

# ================================================================
# NOTES IMPORTANTES
# ================================================================
#
# 1. SLACK BOT SETUP:
#    - Créer une app sur https://api.slack.com/apps
#    - Ajouter les Bot Token Scopes:
#      * chat:write
#      * users:read
#      * users:read.email
#      * im:write
#      * im:read
#    - Installer le bot dans votre workspace
#    - Copier le "Bot User OAuth Token"
#
# 2. CORRESPONDANCE EMAIL:
#    - Les utilisateurs doivent avoir le MÊME EMAIL dans Monday.com et Slack
#    - Le système récupère l'email depuis Monday.com
#    - Puis cherche l'utilisateur Slack par email
#
# 3. TYPES DE NOTIFICATIONS:
#    - Attente de validation (immédiat)
#    - Timeout (après 20s si pas de réponse)
#    - Succès (après validation et merge)
#
# 4. QUESTIONS vs COMMANDES:
#    - Questions: Réponse dans Monday.com seulement
#    - Commandes: PR + Validation + Notifications Slack
#
# 5. DÉSACTIVATION:
#    - Pour désactiver Slack: SLACK_ENABLED=false
#    - Le système fonctionnera normalement sans notifications
#
# 6. SÉCURITÉ:
#    - NE JAMAIS commiter ce fichier avec les vrais tokens
#    - Utiliser un fichier .env local (dans .gitignore)
#    - Token Slack = accès complet à votre workspace
#
# ================================================================
# GUIDE COMPLET
# ================================================================
# Voir: GUIDE_SLACK_NOTIFICATIONS.md pour la documentation complète
# ================================================================

